<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central University of Kashmir - Academic Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tab-active {
            background: linear-gradient(135deg, #1e3a8a 0%, #616c8f 50%, #3730a3 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.3);
        }
        .grade-A { background: linear-gradient(135deg, #7a817e, #394d47); }
        .grade-B { background: linear-gradient(135deg, #b6babd, #9ba7ac); }
        .grade-C { background: linear-gradient(135deg, #beb6ac, #bcb2ad); }
        .grade-D { background: linear-gradient(135deg, #b7a5a5, #a29292); }
        
        .professional-gradient {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%);
        }
        
        .university-primary {
            background: linear-gradient(135deg, #475569 0%, #64748b 50%, #6b7280 100%);
        }
        
        .university-secondary {
            background: linear-gradient(135deg, #64748b 0%, #6b7280 50%, #9ca3af 100%);
        }
        
        .premium-shadow {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .premium-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .professional-input {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .professional-input:focus {
            border-color: #3730a3;
            box-shadow: 0 0 0 3px rgba(55, 48, 163, 0.1);
        }
        
        .executive-button {
            background: linear-gradient(135deg, #475569 0%, #64748b 50%, #6b7280 100%);
            box-shadow: 0 4px 15px rgba(71, 85, 105, 0.2);
            transition: all 0.3s ease;
        }
        
        .executive-button:hover {
            background: linear-gradient(135deg, #64748b 0%, #6b7280 50%, #9ca3af 100%);
            box-shadow: 0 8px 25px rgba(71, 85, 105, 0.3);
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="professional-gradient min-h-screen">
    <!-- Header -->
    <header class="premium-card border-b-4 border-blue-900 sticky top-0 z-50 backdrop-blur-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center">
                    <div class="w-20 h-20 university-primary rounded-xl flex items-center justify-center premium-shadow">
                        <svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
                        </svg>
                    </div>
                    <div class="ml-6">
                        <h1 class="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent">Central University of Kashmir</h1>
                        <p class="text-slate-600 font-medium text-lg">Academic Management Portal</p>
                        <div class="w-24 h-1 bg-gradient-to-r from-blue-900 to-blue-700 rounded-full mt-1"></div>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="logout()" id="logoutBtn" class="bg-gradient-to-r from-red-600 to-red-700 px-8 py-4 rounded-xl font-semibold text-white transition-all duration-300 hover:from-red-700 hover:to-red-800 hover:shadow-lg hidden flex items-center space-x-2">
                        <span>Logout</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Registration Modal -->
    <div id="registrationModal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="premium-card rounded-2xl premium-shadow p-10 max-w-2xl w-full mx-4 fade-in border-t-4 border-slate-600 max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-8">
                <div class="w-20 h-20 university-primary rounded-2xl flex items-center justify-center mx-auto mb-6 premium-shadow">
                    <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H11V21H5V3H13V9H21Z"/>
                    </svg>
                </div>
                <h2 id="registrationTitle" class="text-3xl font-bold text-slate-800">New Registration</h2>
                <p id="registrationSubtitle" class="text-slate-600 mt-3 font-medium">Central University of Kashmir</p>
                <div class="w-16 h-1 bg-slate-600 rounded-full mx-auto mt-2"></div>
            </div>
            
            <form id="registrationForm" onsubmit="handleRegistration(event)">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">First Name *</label>
                        <input type="text" id="regFirstName" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800" placeholder="Enter first name" required>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Last Name *</label>
                        <input type="text" id="regLastName" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800" placeholder="Enter last name" required>
                    </div>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Email Address *</label>
                    <input type="email" id="regEmail" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800" placeholder="Enter email address" required>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Phone Number *</label>
                    <input type="tel" id="regPhone" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800" placeholder="Enter phone number" required>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-slate-700 mb-2">Registration Type *</label>
                    <select id="regType" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800" required onchange="toggleRegistrationFields()">
                        <option value="">Select Registration Type</option>
                        <option value="student">Student Registration</option>
                        <option value="faculty">Faculty Registration</option>
                    </select>
                </div>
                
                <!-- Student Specific Fields -->
                <div id="studentFields" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-2">Course/Program *</label>
                            <select id="regCourse" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800">
                                <option value="">Select Course</option>
                                <option value="btech-cse">B.Tech Computer Science</option>
                                <option value="btech-ece">B.Tech Electronics</option>
                                <option value="mtech-cse">M.Tech Computer Science</option>
                                <option value="mba">MBA</option>
                                <option value="bba">BBA</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-2">Year of Study *</label>
                            <select id="regYear" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800">
                                <option value="">Select Year</option>
                                <option value="1">1st Year</option>
                                <option value="2">2nd Year</option>
                                <option value="3">3rd Year</option>
                                <option value="4">4th Year</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Faculty Specific Fields -->
                <div id="facultyFields" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-2">Department *</label>
                            <select id="regDepartment" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800">
                                <option value="">Select Department</option>
                                <option value="cse">Computer Science & Engineering</option>
                                <option value="ece">Electronics & Communication</option>
                                <option value="mathematics">Mathematics</option>
                                <option value="physics">Physics</option>
                                <option value="chemistry">Chemistry</option>
                                <option value="management">Management Studies</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-2">Designation *</label>
                            <select id="regDesignation" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800">
                                <option value="">Select Designation</option>
                                <option value="professor">Professor</option>
                                <option value="associate-professor">Associate Professor</option>
                                <option value="assistant-professor">Assistant Professor</option>
                                <option value="lecturer">Lecturer</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Password *</label>
                        <input type="password" id="regPassword" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800" placeholder="Create password" required>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">Confirm Password *</label>
                        <input type="password" id="regConfirmPassword" class="professional-input w-full px-4 py-3 rounded-xl font-medium text-slate-800" placeholder="Confirm password" required>
                    </div>
                </div>
                
                <div class="mb-6">
                    <label class="flex items-start space-x-3">
                        <input type="checkbox" id="regTerms" class="mt-1 rounded border-slate-300" required>
                        <span class="text-sm text-slate-700">I agree to the <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">Terms and Conditions</a> and <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">Privacy Policy</a> of Central University of Kashmir.</span>
                    </label>
                </div>
                
                <div class="flex space-x-4 mb-6">
                    <button type="submit" class="flex-1 executive-button text-white py-4 px-6 rounded-xl font-bold text-lg">
                        Submit Registration
                    </button>
                    <button type="button" onclick="closeRegistrationModal()" class="flex-1 university-secondary text-white py-4 px-6 rounded-xl font-bold text-lg hover:shadow-lg transition-all duration-300">
                        Cancel
                    </button>
                </div>
            </form>
            
            <!-- Registration Info -->
            <div class="mt-8 p-6 bg-blue-50 rounded-xl border border-blue-200">
                <h4 class="font-bold text-sm text-blue-800 mb-3">Registration Process</h4>
                <div class="text-sm text-blue-700 space-y-2">
                    <div>‚Ä¢ Your registration will be reviewed by the administration</div>
                    <div>‚Ä¢ You will receive a confirmation email within 24-48 hours</div>
                    <div>‚Ä¢ Login credentials will be provided after approval</div>
                    <div>‚Ä¢ For urgent queries, contact: +91-194-2424000</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="premium-card rounded-2xl premium-shadow p-10 max-w-lg w-full mx-4 fade-in border-t-4 border-slate-600">
            <div class="text-center mb-8">
                <div class="w-20 h-20 university-primary rounded-2xl flex items-center justify-center mx-auto mb-6 premium-shadow">
                    <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-slate-800">Reset Password</h2>
                <p class="text-slate-600 mt-3 font-medium">Central University of Kashmir</p>
                <div class="w-16 h-1 bg-slate-600 rounded-full mx-auto mt-2"></div>
            </div>
            
            <div id="forgotPasswordStep1">
                <form id="forgotPasswordForm" onsubmit="handleForgotPassword(event)">
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-slate-700 mb-3">User Type</label>
                        <select id="forgotUserType" class="professional-input w-full px-5 py-4 rounded-xl font-medium text-slate-800" required>
                            <option value="">Select User Type</option>
                            <option value="student">Student</option>
                            <option value="faculty">Faculty</option>
                        </select>
                    </div>
                    
                    <div class="mb-6">
                        <label id="forgotIdLabel" class="block text-sm font-semibold text-slate-700 mb-3">Email Address or ID</label>
                        <input type="text" id="forgotId" class="professional-input w-full px-5 py-4 rounded-xl font-medium text-slate-800" placeholder="Enter your email or ID" required>
                    </div>
                    
                    <div class="flex space-x-4 mb-6">
                        <button type="submit" class="flex-1 executive-button text-white py-4 px-6 rounded-xl font-bold text-lg">
                            Send Reset Link
                        </button>
                        <button type="button" onclick="closeForgotPasswordModal()" class="flex-1 university-secondary text-white py-4 px-6 rounded-xl font-bold text-lg hover:shadow-lg transition-all duration-300">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
            
            <div id="forgotPasswordStep2" class="hidden">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-2">Reset Link Sent!</h3>
                    <p class="text-slate-600 text-sm">We've sent a password reset link to your email address. Please check your inbox and follow the instructions.</p>
                </div>
                
                <button onclick="closeForgotPasswordModal()" class="w-full executive-button text-white py-4 px-6 rounded-xl font-bold text-lg">
                    Close
                </button>
            </div>
            
            <!-- Help Section -->
            <div class="mt-8 p-6 bg-yellow-50 rounded-xl border border-yellow-200">
                <h4 class="font-bold text-sm text-yellow-800 mb-3">Need Help?</h4>
                <div class="text-sm text-yellow-700 space-y-2">
                    <div>‚Ä¢ Check your spam/junk folder for the reset email</div>
                    <div>‚Ä¢ Reset link expires in 24 hours</div>
                    <div>‚Ä¢ Contact IT Support: support@cukashmir.ac.in</div>
                    <div>‚Ä¢ Call: +91-194-2424000 (Ext: 123)</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="premium-card rounded-2xl premium-shadow p-10 max-w-lg w-full mx-4 fade-in border-t-4 border-slate-600">
            <div class="text-center mb-8">
                <div id="loginIcon" class="w-20 h-20 university-primary rounded-2xl flex items-center justify-center mx-auto mb-6 premium-shadow">
                    <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                </div>
                <h2 id="loginTitle" class="text-3xl font-bold text-slate-800">Faculty Login</h2>
                <p id="loginSubtitle" class="text-slate-600 mt-3 font-medium">Central University of Kashmir</p>
                <div class="w-16 h-1 bg-slate-600 rounded-full mx-auto mt-2"></div>
            </div>
            
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="mb-6">
                    <label id="loginIdLabel" class="block text-sm font-semibold text-slate-700 mb-3">Faculty ID</label>
                    <input type="text" id="loginId" class="professional-input w-full px-5 py-4 rounded-xl font-medium text-slate-800" placeholder="Enter your Faculty ID" required>
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-semibold text-slate-700 mb-3">Password</label>
                    <input type="password" id="loginPassword" class="professional-input w-full px-5 py-4 rounded-xl font-medium text-slate-800" placeholder="Enter your password" required>
                </div>
                
                <div class="flex space-x-4 mb-6">
                    <button type="submit" class="flex-1 executive-button text-white py-4 px-6 rounded-xl font-bold text-lg">
                        Login
                    </button>
                    <button type="button" onclick="closeLoginModal()" class="flex-1 university-secondary text-white py-4 px-6 rounded-xl font-bold text-lg hover:shadow-lg transition-all duration-300">
                        Cancel
                    </button>
                </div>
                
                <!-- Additional Options -->
                <div class="flex justify-between text-sm">
                    <button type="button" onclick="showRegistration()" class="text-slate-600 hover:text-slate-800 font-medium">New Registration</button>
                    <button type="button" onclick="showForgotPassword()" class="text-slate-600 hover:text-slate-800 font-medium">Forgot Password?</button>
                </div>
            </form>
            
            <!-- Demo Credentials -->
            <div class="mt-8 p-6 bg-slate-50 rounded-xl border border-slate-200">
                <h4 class="font-bold text-sm text-slate-800 mb-3">Demo Credentials</h4>
                <div id="demoCredentials" class="text-sm text-slate-700 space-y-2 font-medium">
                    <div class="flex justify-between"><span>Faculty:</span> <code class="bg-slate-200 px-2 py-1 rounded">T001 / teacher123</code></div>
                    <div class="flex justify-between"><span>Student:</span> <code class="bg-slate-200 px-2 py-1 rounded">ST001 / student123</code></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Welcome Section -->
    <div id="welcomeSection" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        <div class="text-center fade-in">
            <div class="premium-card p-12 rounded-3xl mb-12 border-t-4 border-blue-900">
                <div class="w-32 h-32 university-primary rounded-3xl flex items-center justify-center mx-auto mb-10 premium-shadow">
                    <svg class="w-20 h-20 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
                    </svg>
                </div>
                <h1 class="text-6xl font-bold bg-gradient-to-r from-slate-800 via-slate-700 to-slate-600 bg-clip-text text-transparent mb-4">Central University of Kashmir</h1>
                <div class="w-32 h-1 bg-gradient-to-r from-blue-900 to-blue-700 rounded-full mx-auto mb-6"></div>
                <p class="text-2xl font-semibold text-slate-600 mb-6">Academic Management Portal</p>
                <p class="text-xl text-slate-600 mb-12 max-w-4xl mx-auto leading-relaxed font-medium">
                    Experience next-generation academic management with our comprehensive portal. Access your academic information, manage courses, track attendance, and stay connected with your educational journey through our state-of-the-art platform.
                </p>
                <div class="flex flex-col sm:flex-row gap-6 justify-center">
                    <button onclick="showLoginModal('teacher')" class="executive-button text-white px-12 py-6 rounded-2xl font-bold text-xl flex items-center justify-center space-x-3">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                        <span>Faculty Login</span>
                    </button>
                    <button onclick="showLoginModal('student')" class="university-secondary text-white px-12 py-6 rounded-2xl font-bold text-xl hover:shadow-xl transition-all duration-300 flex items-center justify-center space-x-3">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18M12,3L1,9L12,15L21,10.09V17H23V9"/>
                        </svg>
                        <span>Student Login</span>
                    </button>
                </div>
            </div>
            
           
        </div>
    </div>

    <!-- Teacher Section -->
    <div id="teacherSection" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 hidden">
        <div class="fade-in">
            <div class="premium-card rounded-3xl premium-shadow p-10 mb-12 border-t-4 border-blue-900">
                <h2 class="text-4xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent mb-8">Faculty Dashboard</h2>
                <div class="w-24 h-1 bg-gradient-to-r from-blue-900 to-blue-700 rounded-full mb-8"></div>
                
                <!-- Teacher Navigation -->
                <div class="flex flex-wrap gap-3 mb-10">
                    <button onclick="showTeacherTab('notices')" id="teacherNoticesTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 tab-active">
                        Notices
                    </button>
                    <button onclick="showTeacherTab('marks')" id="teacherMarksTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Manage Marks
                    </button>
                    <button onclick="showTeacherTab('attendance')" id="teacherAttendanceTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Attendance
                    </button>
                    <button onclick="showTeacherTab('assignments')" id="teacherAssignmentsTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Assignments
                    </button>
                    <button onclick="showTeacherTab('resources')" id="teacherResourcesTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Resources
                    </button>
                    <button onclick="showTeacherTab('leave')" id="teacherLeaveTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Leave Management
                    </button>
                </div>

                <!-- Teacher Notices Management -->
                <div id="teacherNotices" class="teacher-content">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Notice Management</h3>
                        
                        <!-- Create New Notice -->
                        <div class="bg-white rounded-lg p-6 mb-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Create New Notice</h4>
                            <form id="noticeForm" onsubmit="createNotice(event)">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-900">Notice Title</label>
                                        <input type="text" id="noticeTitle" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" placeholder="Enter notice title" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-900">Priority</label>
                                        <select id="noticePriority" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" required>
                                            <option value="normal">Normal</option>
                                            <option value="important">Important</option>
                                            <option value="urgent">Urgent</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium mb-2 text-gray-900">Notice Content</label>
                                    <textarea id="noticeContent" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" rows="4" placeholder="Enter notice content..." required></textarea>
                                </div>
                                <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                                    üì§ Publish Notice
                                </button>
                            </form>
                        </div>

                        <!-- Published Notices -->
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Published Notices</h4>
                            <div class="space-y-4" id="publishedNoticesList">
                                <div class="border rounded-lg p-4 border-l-4 border-red-500">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <h5 class="font-semibold text-lg text-gray-900">Mid-Term Examination Schedule</h5>
                                            <p class="text-sm text-gray-600">Published: Jan 15, 2024</p>
                                            <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-sm">üö® Urgent</span>
                                        </div>
                                        <button onclick="deleteNotice('N001')" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">Delete</button>
                                    </div>
                                    <p class="text-sm text-gray-700">Mid-term examinations will be conducted from February 1-10, 2024.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Teacher Marks Management -->
                <div id="teacherMarks" class="teacher-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Student Marks Management</h3>
                        
                        <!-- Excel Upload Section -->
                        <div class="bg-white rounded-lg p-6 mb-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">üìä Excel File Management</h4>
                            
                            <!-- Upload Excel File -->
                            <div class="mb-6">
                                <div id="dropZone" class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors">
                                    <div class="mb-4">
                                        <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                            <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </div>
                                    <div class="mb-4">
                                        <label for="excelFile" class="cursor-pointer">
                                            <span class="mt-2 block text-sm font-medium text-gray-900">
                                                Click to upload Excel file or drag and drop
                                            </span>
                                            <span class="mt-1 block text-xs text-gray-500">
                                                Supports .xlsx, .xls files (Max 10MB)
                                            </span>
                                        </label>
                                        <input type="file" id="excelFile" name="excelFile" accept=".xlsx,.xls,.csv" class="hidden" onchange="handleExcelUpload(event)">
                                    </div>
                                    <button onclick="document.getElementById('excelFile').click()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                        üìÅ Choose Excel File
                                    </button>
                                </div>
                            </div>

                            <!-- Template Download -->
                            <div class="bg-blue-50 rounded-lg p-4 mb-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h5 class="font-semibold text-blue-900">üìã Download Excel Template</h5>
                                        <p class="text-sm text-blue-700">Download the standard template with proper column headers</p>
                                    </div>
                                    <button onclick="downloadTemplate()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                        ‚¨áÔ∏è Download Template
                                    </button>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="bg-yellow-50 rounded-lg p-4 mb-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h5 class="font-semibold text-yellow-900">‚ö° Quick Actions</h5>
                                        <p class="text-sm text-yellow-700">Load sample data or clear the table</p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button onclick="loadSampleData()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                                            üìä Load Sample Data
                                        </button>
                                        <button onclick="clearAllData()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700">
                                            üóëÔ∏è Clear Table
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- File Status -->
                            <div id="fileStatus" class="hidden">
                                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                    <div class="flex items-center">
                                        <div class="flex-shrink-0">
                                            <svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                            </svg>
                                        </div>
                                        <div class="ml-3">
                                            <p class="text-sm font-medium text-green-800" id="fileStatusText">
                                                Excel file uploaded successfully!
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Subject Selection for Marks -->
                        <div class="bg-white rounded-lg p-4 mb-6 shadow">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-semibold text-gray-900">üìö Select Subject to Manage</h4>
                                <div class="flex space-x-2">
                                    <button onclick="exportMarks()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                                        üì§ Export to Excel
                                    </button>
                                    <button onclick="saveAllMarks()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                                        üíæ Save All Changes
                                    </button>
                                </div>
                            </div>
                            <select id="subjectSelectTeacher" onchange="loadSubjectMarks()" class="px-3 py-2 border rounded-lg bg-white text-gray-900">
                                <option value="mathematics">Mathematics</option>
                                <option value="physics">Physics</option>
                                <option value="chemistry">Chemistry</option>
                                <option value="computer-science">Computer Science</option>
                            </select>
                        </div>

                        <!-- Marks Table -->
                        <div class="bg-white rounded-lg shadow overflow-hidden">
                            <div class="px-6 py-4 bg-gray-100 border-b">
                                <h4 class="font-semibold text-gray-900">üìä Student Marks - <span id="currentSubjectName">Mathematics</span></h4>
                                <p class="text-sm text-gray-600 mt-1">Click on any cell to edit marks directly</p>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="w-full" id="marksTable">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-4 py-3 text-left font-semibold text-gray-900 border-r">Roll No.</th>
                                            <th class="px-4 py-3 text-left font-semibold text-gray-900 border-r">Student Name</th>
                                            <th class="px-4 py-3 text-center font-semibold text-gray-900 border-r bg-blue-50">Test I<br><span class="text-xs font-normal">(Out of 15)</span></th>
                                            <th class="px-4 py-3 text-center font-semibold text-gray-900 border-r bg-green-50">Test II<br><span class="text-xs font-normal">(Out of 15)</span></th>
                                            <th class="px-4 py-3 text-center font-semibold text-gray-900 border-r bg-purple-50">Presentation<br><span class="text-xs font-normal">(Out of 10)</span></th>
                                            <th class="px-4 py-3 text-center font-semibold text-gray-900 border-r bg-yellow-50">Assignment<br><span class="text-xs font-normal">(Out of 5)</span></th>
                                            <th class="px-4 py-3 text-center font-semibold text-gray-900 border-r bg-indigo-50">Attendance %</th>
                                            <th class="px-4 py-3 text-center font-semibold text-gray-900 border-r bg-indigo-50">Attendance Marks<br><span class="text-xs font-normal">(Out of 5)</span></th>
                                            <th class="px-4 py-3 text-center font-semibold text-gray-900 bg-gray-100">Total<br><span class="text-xs font-normal">(Out of 50)</span></th>
                                            <th class="px-4 py-3 text-center font-semibold text-gray-900 bg-gray-100">Grade</th>
                                        </tr>
                                    </thead>
                                    <tbody id="marksTableBody">
                                        <!-- Real student data from Central University of Kashmir -->
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr01</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">ABDUL WARIS</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr02</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">ABRAAR SAJAD</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr03</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">ADNAAN ZARGAR</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr04</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">AFAAN HUSSAIN</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr05</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">AINAM MUSHTAQ</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr06</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">ALEEM KANYU</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr07</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">ARSALAN YOUSUF</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr08</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">ASEEF BANDEY</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr09</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">ATISHAM</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                        <tr class="border-b hover:bg-gray-50">
                                            <td class="px-4 py-3 text-gray-900 border-r font-medium">2324CUKmr10</td>
                                            <td class="px-4 py-3 text-gray-900 border-r">BIAL AHMAD</td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" onchange="calculateTotal(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <input type="number" value="" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                                            </td>
                                            <td class="px-4 py-3 text-center border-r">
                                                <span class="attendance-marks font-semibold text-gray-600">-</span>
                                            </td>
                                            <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                                            <td class="px-4 py-3 text-center bg-gray-50">
                                                <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Attendance Marking Guide -->
                            <div class="px-6 py-4 bg-blue-50 border-t">
                                <h5 class="font-semibold text-blue-900 mb-2">üìã Attendance Marking Guide:</h5>
                                <div class="grid grid-cols-2 md:grid-cols-6 gap-2 text-xs">
                                    <div class="bg-green-100 text-green-800 px-2 py-1 rounded">95%+ = 5 marks</div>
                                    <div class="bg-blue-100 text-blue-800 px-2 py-1 rounded">90-95% = 4 marks</div>
                                    <div class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded">85-90% = 3 marks</div>
                                    <div class="bg-orange-100 text-orange-800 px-2 py-1 rounded">80-85% = 2 marks</div>
                                    <div class="bg-purple-100 text-purple-800 px-2 py-1 rounded">75-80% = 1 mark</div>
                                    <div class="bg-red-100 text-red-800 px-2 py-1 rounded">Below 75% = Ineligible</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Teacher Attendance Management -->
                <div id="teacherAttendance" class="teacher-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Attendance Management</h3>
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2 text-gray-900">Select Date:</label>
                            <input type="date" id="attendanceDate" class="px-3 py-2 border rounded-lg bg-white text-gray-900" value="2024-01-15">
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full bg-white rounded-lg shadow">
                                <thead class="bg-gray-100">
                                    <tr>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-900">Student ID</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-900">Name</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-900">Status</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-900">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b hover:bg-gray-50">
                                        <td class="px-4 py-3 text-gray-900">ST001</td>
                                        <td class="px-4 py-3 text-gray-900">John Doe</td>
                                        <td class="px-4 py-3">
                                            <select class="px-2 py-1 border rounded bg-white text-gray-900">
                                                <option value="present" selected>Present</option>
                                                <option value="absent">Absent</option>
                                                <option value="late">Late</option>
                                            </select>
                                        </td>
                                        <td class="px-4 py-3">
                                            <button onclick="updateAttendance('ST001')" class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">Save</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Teacher Assignments Management -->
                <div id="teacherAssignments" class="teacher-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Assignment Management</h3>
                        
                        <!-- Create New Assignment -->
                        <div class="bg-white rounded-lg p-4 mb-6 shadow">
                            <h4 class="font-semibold mb-3 text-gray-900">Create New Assignment</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-900">Assignment Title</label>
                                    <input type="text" id="assignmentTitle" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" placeholder="Enter assignment title">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-900">Subject</label>
                                    <select id="assignmentSubject" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900">
                                        <option>Mathematics</option>
                                        <option>Physics</option>
                                        <option>Chemistry</option>
                                        <option>Computer Science</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-900">Due Date</label>
                                    <input type="date" id="assignmentDueDate" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1 text-gray-900">Max Marks</label>
                                    <input type="number" id="assignmentMarks" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" placeholder="100">
                                </div>
                            </div>
                            <div class="mt-4">
                                <label class="block text-sm font-medium mb-1 text-gray-900">Description</label>
                                <textarea id="assignmentDescription" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" rows="3" placeholder="Assignment description..."></textarea>
                            </div>
                            <button onclick="createAssignment()" class="mt-4 bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700">Create Assignment</button>
                        </div>

                        <!-- Existing Assignments -->
                        <div class="space-y-4" id="assignmentsList">
                            <div class="bg-white rounded-lg p-4 shadow">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h5 class="font-semibold text-lg text-gray-900">Calculus Problem Set 1</h5>
                                        <p class="text-gray-600">Mathematics ‚Ä¢ Due: Jan 20, 2024 ‚Ä¢ Max: 100 marks</p>
                                        <p class="text-sm text-gray-500 mt-1">Solve differential equations from chapter 5</p>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button onclick="editAssignment('A001')" class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">Edit</button>
                                        <button onclick="deleteAssignment('A001')" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">Delete</button>
                                    </div>
                                </div>
                                <div class="mt-3 text-sm">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded">15 Submitted</span>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded ml-2">5 Pending</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Teacher Resources Management -->
                <div id="teacherResources" class="teacher-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Resource Management</h3>
                        
                        <!-- Upload New Resource -->
                        <div class="bg-white rounded-lg p-6 mb-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Upload New Resource</h4>
                            <form id="resourceForm" onsubmit="uploadResource(event)">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-900">Resource Title</label>
                                        <input type="text" id="resourceTitle" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" placeholder="Enter resource title" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-900">Subject</label>
                                        <select id="resourceSubject" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" required>
                                            <option value="">Select Subject</option>
                                            <option value="mathematics">Mathematics</option>
                                            <option value="physics">Physics</option>
                                            <option value="chemistry">Chemistry</option>
                                            <option value="computer-science">Computer Science</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium mb-2 text-gray-900">Description</label>
                                    <textarea id="resourceDescription" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" rows="3" placeholder="Brief description of the resource..."></textarea>
                                </div>
                                <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
                                    üì§ Upload Resource
                                </button>
                            </form>
                        </div>

                        <!-- Uploaded Resources -->
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Uploaded Resources</h4>
                            <div class="space-y-4">
                                <div class="border rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-2">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                                <span class="text-red-600">üìÑ</span>
                                            </div>
                                            <div>
                                                <h5 class="font-semibold text-lg text-gray-900">Calculus Chapter 5 - Derivatives</h5>
                                                <p class="text-sm text-gray-600">Mathematics ‚Ä¢ Lecture Notes ‚Ä¢ Uploaded: Jan 15, 2024</p>
                                            </div>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button onclick="editResource('R001')" class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">Edit</button>
                                            <button onclick="deleteResource('R001')" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">Delete</button>
                                        </div>
                                    </div>
                                    <p class="text-sm text-gray-700 mb-2">Comprehensive notes on derivatives including examples and practice problems</p>
                                    <div class="text-xs text-gray-500">
                                        Downloads: 45 ‚Ä¢ Size: 2.3 MB ‚Ä¢ Format: PDF
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Teacher Leave Management -->
                <div id="teacherLeave" class="teacher-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Student Leave Management</h3>
                        
                        <!-- Leave Applications Overview -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-white rounded-lg p-4 shadow text-center">
                                <div class="text-2xl font-bold text-yellow-600">5</div>
                                <div class="text-sm text-gray-600">Pending</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 shadow text-center">
                                <div class="text-2xl font-bold text-green-600">12</div>
                                <div class="text-sm text-gray-600">Approved</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 shadow text-center">
                                <div class="text-2xl font-bold text-red-600">3</div>
                                <div class="text-sm text-gray-600">Rejected</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 shadow text-center">
                                <div class="text-2xl font-bold text-blue-600">20</div>
                                <div class="text-sm text-gray-600">Total</div>
                            </div>
                        </div>

                        <!-- Leave Applications List -->
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 shadow border-l-4 border-yellow-500">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h5 class="font-semibold text-lg text-gray-900">John Doe (ST001)</h5>
                                        <p class="text-gray-600">Sick Leave ‚Ä¢ Jan 18-20, 2024 (3 days)</p>
                                        <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm font-medium">‚è≥ Pending Review</span>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <p class="text-sm text-gray-700"><strong>Reason:</strong> Fever and flu symptoms, doctor advised rest</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="approveLeave('L001')" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">‚úÖ Approve</button>
                                    <button onclick="rejectLeave('L001')" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">‚ùå Reject</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Section -->
    <div id="studentSection" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 hidden">
        <div class="fade-in">
            <div class="premium-card rounded-3xl premium-shadow p-10 mb-12 border-t-4 border-blue-900">
                <h2 class="text-4xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent mb-8">Student Dashboard</h2>
                <div class="w-24 h-1 bg-gradient-to-r from-blue-900 to-blue-700 rounded-full mb-8"></div>
                
                <!-- Student Navigation -->
                <div class="flex flex-wrap gap-3 mb-10">
                    <button onclick="showStudentTab('notices')" id="studentNoticesTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 tab-active">
                        Notices
                    </button>
                    <button onclick="showStudentTab('courses')" id="studentCoursesTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        My Courses
                    </button>
                    <button onclick="showStudentTab('marks')" id="studentMarksTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        My Marks
                    </button>
                    <button onclick="showStudentTab('analytics')" id="studentAnalyticsTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Performance
                    </button>
                    <button onclick="showStudentTab('resources')" id="studentResourcesTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Resources
                    </button>
                    <button onclick="showStudentTab('assignments')" id="studentAssignmentsTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Assignments
                    </button>
                    <button onclick="showStudentTab('library')" id="studentLibraryTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Library
                    </button>
                    <button onclick="showStudentTab('leave')" id="studentLeaveTab" class="px-6 py-4 rounded-xl font-semibold transition-all duration-300 bg-slate-200 text-slate-700 hover:bg-slate-300">
                        Leave Applications
                    </button>
                </div>

                <!-- Student Notices -->
                <div id="studentNotices" class="student-content">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Latest Notices</h3>
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 shadow border-l-4 border-red-500">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h5 class="font-semibold text-lg text-gray-900">Mid-Term Examination Schedule</h5>
                                        <p class="text-sm text-gray-600">Published: Jan 15, 2024</p>
                                        <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-sm">üö® Urgent</span>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-700">Mid-term examinations will be conducted from February 1-10, 2024.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Marks -->
                <div id="studentMarks" class="student-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">My Marks</h3>
                        
                        <!-- Subject Selection -->
                        <div class="bg-white rounded-lg p-4 mb-6 shadow">
                            <label class="block text-sm font-medium mb-2 text-gray-900">Select Subject:</label>
                            <select id="subjectSelect" onchange="showSubjectMarks()" class="px-3 py-2 border rounded-lg bg-white text-gray-900">
                                <option value="mathematics">Mathematics</option>
                                <option value="physics">Physics</option>
                                <option value="chemistry">Chemistry</option>
                                <option value="computer-science">Computer Science</option>
                            </select>
                        </div>

                        <!-- Mathematics Marks (Default) -->
                        <div id="mathematicsMarks" class="subject-marks">
                            <div class="bg-white rounded-lg p-6 shadow">
                                <h4 class="font-semibold text-xl mb-6 text-gray-900">Mathematics - Detailed Marks</h4>
                                
                                <!-- CIA Marks -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div class="bg-blue-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-lg text-blue-800 mb-3">üìù CIA 1 Marks</h5>
                                        <div class="text-3xl font-bold text-blue-600 mb-2">8/10</div>
                                        <div class="text-sm text-gray-600">Date: Dec 15, 2023</div>
                                        <div class="text-sm text-gray-600">Topics: Limits & Derivatives</div>
                                        <div class="mt-2">
                                            <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm">Grade: A</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-lg text-green-800 mb-3">üìù CIA 2 Marks</h5>
                                        <div class="text-3xl font-bold text-green-600 mb-2">9/10</div>
                                        <div class="text-sm text-gray-600">Date: Jan 10, 2024</div>
                                        <div class="text-sm text-gray-600">Topics: Integration & Applications</div>
                                        <div class="mt-2">
                                            <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm">Grade: A+</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Presentation & Assignment Marks -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div class="bg-purple-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-lg text-purple-800 mb-3">üé§ Presentation Marks</h5>
                                        <div class="text-3xl font-bold text-purple-600 mb-2">8.5/10</div>
                                        <div class="text-sm text-gray-600">Topic: Applications of Calculus</div>
                                        <div class="text-sm text-gray-600">Date: Jan 8, 2024</div>
                                        <div class="mt-2">
                                            <span class="px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm">Grade: A</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-yellow-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-lg text-yellow-800 mb-3">üìã Assignment Marks</h5>
                                        <div class="text-3xl font-bold text-yellow-600 mb-2">4/5</div>
                                        <div class="text-sm text-gray-600">Assignment 1: Problem Set</div>
                                        <div class="text-sm text-gray-600">Submitted: Jan 5, 2024</div>
                                        <div class="mt-2">
                                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm">Grade: A</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Attendance Marks -->
                                <div class="bg-indigo-50 rounded-lg p-4 mb-6">
                                    <h5 class="font-semibold text-lg text-indigo-800 mb-3">üìÖ Attendance Marks</h5>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <div class="text-2xl font-bold text-indigo-600">96%</div>
                                            <div class="text-sm text-gray-600">Current Attendance</div>
                                        </div>
                                        <div>
                                            <div class="text-2xl font-bold text-indigo-600">5/5</div>
                                            <div class="text-sm text-gray-600">Attendance Marks</div>
                                        </div>
                                        <div>
                                            <span class="px-3 py-1 bg-green-100 text-green-800 rounded text-sm font-medium">‚úÖ Eligible (95%+)</span>
                                        </div>
                                    </div>
                                    <div class="mt-3 text-xs text-gray-600">
                                        <strong>Marking Criteria:</strong> 95%+ = 5 marks | 90-95% = 4 marks | 85-90% = 3 marks | 80-85% = 2 marks | 75-80% = 1 mark | Below 75% = Ineligible
                                    </div>
                                </div>

                                <!-- Total Marks Summary -->
                                <div class="bg-gray-100 rounded-lg p-4">
                                    <h5 class="font-semibold text-lg text-gray-800 mb-3">üìä Total Marks Summary</h5>
                                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 text-center">
                                        <div>
                                            <div class="text-lg font-bold text-blue-600">8/10</div>
                                            <div class="text-xs text-gray-600">CIA 1</div>
                                        </div>
                                        <div>
                                            <div class="text-lg font-bold text-green-600">9/10</div>
                                            <div class="text-xs text-gray-600">CIA 2</div>
                                        </div>
                                        <div>
                                            <div class="text-lg font-bold text-purple-600">8.5/10</div>
                                            <div class="text-xs text-gray-600">Presentation</div>
                                        </div>
                                        <div>
                                            <div class="text-lg font-bold text-yellow-600">4/5</div>
                                            <div class="text-xs text-gray-600">Assignment</div>
                                        </div>
                                        <div>
                                            <div class="text-lg font-bold text-indigo-600">5/5</div>
                                            <div class="text-xs text-gray-600">Attendance</div>
                                        </div>
                                    </div>
                                    <div class="mt-4 pt-4 border-t text-center">
                                        <div class="text-2xl font-bold text-gray-800">34.5/40</div>
                                        <div class="text-sm text-gray-600">Total Internal Marks</div>
                                        <div class="text-lg font-semibold text-green-600 mt-1">Grade: A+</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Physics Marks (Hidden by default) -->
                        <div id="physicsMarks" class="subject-marks hidden">
                            <div class="bg-white rounded-lg p-6 shadow">
                                <h4 class="font-semibold text-xl mb-6 text-gray-900">Physics - Detailed Marks</h4>
                                
                                <!-- CIA Marks -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div class="bg-blue-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-lg text-blue-800 mb-3">üìù CIA 1 Marks</h5>
                                        <div class="text-3xl font-bold text-blue-600 mb-2">7/10</div>
                                        <div class="text-sm text-gray-600">Date: Dec 18, 2023</div>
                                        <div class="text-sm text-gray-600">Topics: Mechanics & Waves</div>
                                        <div class="mt-2">
                                            <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm">Grade: B+</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-lg text-green-800 mb-3">üìù CIA 2 Marks</h5>
                                        <div class="text-3xl font-bold text-green-600 mb-2">8.5/10</div>
                                        <div class="text-sm text-gray-600">Date: Jan 12, 2024</div>
                                        <div class="text-sm text-gray-600">Topics: Thermodynamics</div>
                                        <div class="mt-2">
                                            <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm">Grade: A</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Presentation & Assignment Marks -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div class="bg-purple-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-lg text-purple-800 mb-3">üé§ Presentation Marks</h5>
                                        <div class="text-3xl font-bold text-purple-600 mb-2">9/10</div>
                                        <div class="text-sm text-gray-600">Topic: Quantum Mechanics</div>
                                        <div class="text-sm text-gray-600">Date: Jan 15, 2024</div>
                                        <div class="mt-2">
                                            <span class="px-2 py-1 bg-purple-100 text-purple-800 rounded text-sm">Grade: A+</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-yellow-50 rounded-lg p-4">
                                        <h5 class="font-semibold text-lg text-yellow-800 mb-3">üìã Assignment Marks</h5>
                                        <div class="text-3xl font-bold text-yellow-600 mb-2">5/5</div>
                                        <div class="text-sm text-gray-600">Assignment 1: Lab Report</div>
                                        <div class="text-sm text-gray-600">Submitted: Jan 10, 2024</div>
                                        <div class="mt-2">
                                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm">Grade: A+</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Attendance Marks -->
                                <div class="bg-indigo-50 rounded-lg p-4 mb-6">
                                    <h5 class="font-semibold text-lg text-indigo-800 mb-3">üìÖ Attendance Marks</h5>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <div class="text-2xl font-bold text-indigo-600">88%</div>
                                            <div class="text-sm text-gray-600">Current Attendance</div>
                                        </div>
                                        <div>
                                            <div class="text-2xl font-bold text-indigo-600">3/5</div>
                                            <div class="text-sm text-gray-600">Attendance Marks</div>
                                        </div>
                                        <div>
                                            <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded text-sm font-medium">‚ö†Ô∏è Eligible (85-90%)</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Total Marks Summary -->
                                <div class="bg-gray-100 rounded-lg p-4">
                                    <h5 class="font-semibold text-lg text-gray-800 mb-3">üìä Total Marks Summary</h5>
                                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 text-center">
                                        <div>
                                            <div class="text-lg font-bold text-blue-600">7/10</div>
                                            <div class="text-xs text-gray-600">CIA 1</div>
                                        </div>
                                        <div>
                                            <div class="text-lg font-bold text-green-600">8.5/10</div>
                                            <div class="text-xs text-gray-600">CIA 2</div>
                                        </div>
                                        <div>
                                            <div class="text-lg font-bold text-purple-600">9/10</div>
                                            <div class="text-xs text-gray-600">Presentation</div>
                                        </div>
                                        <div>
                                            <div class="text-lg font-bold text-yellow-600">5/5</div>
                                            <div class="text-xs text-gray-600">Assignment</div>
                                        </div>
                                        <div>
                                            <div class="text-lg font-bold text-indigo-600">3/5</div>
                                            <div class="text-xs text-gray-600">Attendance</div>
                                        </div>
                                    </div>
                                    <div class="mt-4 pt-4 border-t text-center">
                                        <div class="text-2xl font-bold text-gray-800">32.5/40</div>
                                        <div class="text-sm text-gray-600">Total Internal Marks</div>
                                        <div class="text-lg font-semibold text-green-600 mt-1">Grade: A</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Courses -->
                <div id="studentCourses" class="student-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">My Courses</h3>
                        
                        <!-- Course Enrollment Status -->
                        <div class="bg-white rounded-lg p-6 mb-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Enrollment Status</h4>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="text-center p-4 bg-blue-50 rounded-lg">
                                    <div class="text-2xl font-bold text-blue-600">6</div>
                                    <div class="text-sm text-gray-600">Enrolled Courses</div>
                                </div>
                                <div class="text-center p-4 bg-green-50 rounded-lg">
                                    <div class="text-2xl font-bold text-green-600">18</div>
                                    <div class="text-sm text-gray-600">Total Credits</div>
                                </div>
                                <div class="text-center p-4 bg-yellow-50 rounded-lg">
                                    <div class="text-2xl font-bold text-yellow-600">2</div>
                                    <div class="text-sm text-gray-600">Pending Approval</div>
                                </div>
                                <div class="text-center p-4 bg-purple-50 rounded-lg">
                                    <div class="text-2xl font-bold text-purple-600">3.8</div>
                                    <div class="text-sm text-gray-600">Current GPA</div>
                                </div>
                            </div>
                        </div>

                        <!-- Enrolled Courses -->
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Currently Enrolled Courses</h4>
                            <div class="space-y-4">
                                <div class="border rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <h5 class="font-semibold text-lg text-gray-900">Mathematics</h5>
                                            <p class="text-sm text-gray-600">MATH-301 ‚Ä¢ Dr. Smith ‚Ä¢ 3 Credits</p>
                                            <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm">Enrolled</span>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-sm text-gray-500">Current Grade: A</div>
                                            <div class="text-sm text-gray-500">Attendance: 95%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Performance Analytics -->
                <div id="studentAnalytics" class="student-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Performance Analytics</h3>
                        
                        <!-- Overall Performance Summary -->
                        <div class="bg-white rounded-lg p-6 mb-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Overall Performance Summary</h4>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                <div class="text-center p-4 bg-blue-50 rounded-lg">
                                    <div class="text-3xl font-bold text-blue-600">3.8</div>
                                    <div class="text-sm text-gray-600">Current GPA</div>
                                    <div class="text-xs text-green-600">‚Üë +0.2 from last semester</div>
                                </div>
                                <div class="text-center p-4 bg-green-50 rounded-lg">
                                    <div class="text-3xl font-bold text-green-600">92%</div>
                                    <div class="text-sm text-gray-600">Avg Attendance</div>
                                    <div class="text-xs text-green-600">‚Üë +3% from last month</div>
                                </div>
                                <div class="text-center p-4 bg-purple-50 rounded-lg">
                                    <div class="text-3xl font-bold text-purple-600">85%</div>
                                    <div class="text-sm text-gray-600">Assignment Score</div>
                                    <div class="text-xs text-red-600">‚Üì -2% from last month</div>
                                </div>
                                <div class="text-center p-4 bg-yellow-50 rounded-lg">
                                    <div class="text-3xl font-bold text-yellow-600">18</div>
                                    <div class="text-sm text-gray-600">Credits Completed</div>
                                    <div class="text-xs text-green-600">‚Üë +3 this semester</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Resources -->
                <div id="studentResources" class="student-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Learning Resources</h3>
                        
                        <!-- Resource Categories -->
                        <div class="bg-white rounded-lg p-6 mb-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Browse by Category</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <button onclick="filterResources('lecture-notes')" class="p-4 border rounded-lg hover:bg-blue-50 text-center">
                                    <div class="text-2xl mb-2">üìÑ</div>
                                    <div class="font-semibold text-gray-900">Lecture Notes</div>
                                    <div class="text-sm text-gray-600">15 files</div>
                                </button>
                                <button onclick="filterResources('presentations')" class="p-4 border rounded-lg hover:bg-green-50 text-center">
                                    <div class="text-2xl mb-2">üìä</div>
                                    <div class="font-semibold text-gray-900">Presentations</div>
                                    <div class="text-sm text-gray-600">8 files</div>
                                </button>
                                <button onclick="filterResources('videos')" class="p-4 border rounded-lg hover:bg-purple-50 text-center">
                                    <div class="text-2xl mb-2">üé•</div>
                                    <div class="font-semibold text-gray-900">Video Tutorials</div>
                                    <div class="text-sm text-gray-600">12 videos</div>
                                </button>
                                <button onclick="filterResources('references')" class="p-4 border rounded-lg hover:bg-yellow-50 text-center">
                                    <div class="text-2xl mb-2">üìö</div>
                                    <div class="font-semibold text-gray-900">References</div>
                                    <div class="text-sm text-gray-600">6 files</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Assignments -->
                <div id="studentAssignments" class="student-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">My Assignments</h3>
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 shadow">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h5 class="font-semibold text-lg text-gray-900">Calculus Problem Set 1</h5>
                                        <p class="text-gray-600">Mathematics ‚Ä¢ Due: Jan 20, 2024</p>
                                        <p class="text-sm text-gray-500 mt-1">Solve differential equations from chapter 5</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Pending</span>
                                        <div class="text-sm text-gray-500 mt-1">5 days left</div>
                                    </div>
                                </div>
                                <div class="mt-4 flex space-x-2">
                                    <button onclick="submitAssignment('A001')" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Submit Assignment</button>
                                    <button onclick="viewAssignment('A001')" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">View Details</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Library -->
                <div id="studentLibrary" class="student-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Library Management</h3>
                        
                        <!-- Library Overview -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-white rounded-lg p-4 shadow text-center">
                                <div class="text-2xl font-bold text-blue-600">3</div>
                                <div class="text-sm text-gray-600">Books Issued</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 shadow text-center">
                                <div class="text-2xl font-bold text-green-600">12</div>
                                <div class="text-sm text-gray-600">Books Returned</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 shadow text-center">
                                <div class="text-2xl font-bold text-red-600">‚Çπ50</div>
                                <div class="text-sm text-gray-600">Pending Fees</div>
                            </div>
                            <div class="bg-white rounded-lg p-4 shadow text-center">
                                <div class="text-2xl font-bold text-yellow-600">Jan 25</div>
                                <div class="text-sm text-gray-600">Next Due Date</div>
                            </div>
                        </div>

                        <!-- Search Books -->
                        <div class="bg-white rounded-lg p-6 mb-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Search & Request Books</h4>
                            <div class="flex gap-4 items-center mb-4">
                                <input type="text" id="bookSearch" class="flex-1 px-3 py-2 border rounded-lg bg-white text-gray-900" placeholder="Search by title, author, or ISBN...">
                                <button onclick="searchBooks()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Search</button>
                            </div>

                            <!-- Available Books -->
                            <div class="space-y-3">
                                <div class="border rounded-lg p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-semibold text-gray-900">Introduction to Algorithms</h5>
                                            <p class="text-sm text-gray-600">by Thomas H. Cormen</p>
                                            <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">Available</span>
                                        </div>
                                        <button onclick="requestBook('ALG001')" class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">Request</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Currently Issued Books -->
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Currently Issued Books</h4>
                            <div class="space-y-4">
                                <div class="border-l-4 border-red-500 bg-red-50 rounded-lg p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-semibold text-gray-900">Operating System Concepts</h5>
                                            <p class="text-sm text-gray-600">by Abraham Silberschatz</p>
                                            <p class="text-xs text-gray-500">Issued: Dec 15, 2023</p>
                                            <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-xs">‚ö†Ô∏è Overdue</span>
                                            <span class="text-xs text-red-600 ml-2">Due: Jan 15, 2024 (5 days overdue)</span>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button onclick="renewBook('OS001')" class="bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700">Renew</button>
                                            <button onclick="returnBook('OS001')" class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">Return</button>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-xs text-red-600">
                                        Late fee: ‚Çπ50 (‚Çπ10 per day)
                                    </div>
                                </div>

                                <div class="border-l-4 border-green-500 bg-green-50 rounded-lg p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-semibold text-gray-900">Database System Concepts</h5>
                                            <p class="text-sm text-gray-600">by Henry F. Korth</p>
                                            <p class="text-xs text-gray-500">Issued: Jan 10, 2024</p>
                                            <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">‚úÖ Active</span>
                                            <span class="text-xs text-green-600 ml-2">Due: Feb 10, 2024</span>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button onclick="renewBook('DB001')" class="bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700">Renew</button>
                                            <button onclick="returnBook('DB001')" class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">Return</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Leave Applications -->
                <div id="studentLeave" class="student-content hidden">
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-semibold mb-4 text-gray-900">Leave Applications</h3>
                        
                        <!-- Apply for Leave -->
                        <div class="bg-white rounded-lg p-6 mb-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">Apply for Leave</h4>
                            <form id="leaveForm" onsubmit="submitLeaveApplication(event)">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-900">Leave Type</label>
                                        <select id="leaveType" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" required>
                                            <option value="">Select Leave Type</option>
                                            <option value="sick">Sick Leave</option>
                                            <option value="personal">Personal Leave</option>
                                            <option value="emergency">Emergency Leave</option>
                                            <option value="family">Family Function</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-900">Priority</label>
                                        <select id="leavePriority" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" required>
                                            <option value="normal">Normal</option>
                                            <option value="urgent">Urgent</option>
                                            <option value="emergency">Emergency</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-900">From Date</label>
                                        <input type="date" id="leaveFromDate" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-900">To Date</label>
                                        <input type="date" id="leaveToDate" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" required>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium mb-2 text-gray-900">Reason for Leave</label>
                                    <textarea id="leaveReason" class="w-full px-3 py-2 border rounded-lg bg-white text-gray-900" rows="4" placeholder="Please provide detailed reason for leave..." required></textarea>
                                </div>
                                <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                                    üì§ Submit Application
                                </button>
                            </form>
                        </div>

                        <!-- My Leave Applications -->
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="font-semibold mb-4 text-gray-900">My Leave Applications</h4>
                            <div class="space-y-4">
                                <div class="border-l-4 border-yellow-500 bg-yellow-50 rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <h5 class="font-semibold text-lg text-gray-900">Sick Leave Application</h5>
                                            <p class="text-sm text-gray-600">Applied: Jan 17, 2024 ‚Ä¢ Duration: Jan 18-20, 2024 (3 days)</p>
                                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm">‚è≥ Pending</span>
                                        </div>
                                    </div>
                                    <p class="text-sm text-gray-700 mb-2"><strong>Reason:</strong> Fever and flu symptoms, doctor advised rest</p>
                                    <div class="text-xs text-gray-500">
                                        Status: Under review by faculty
                                    </div>
                                </div>

                                <div class="border-l-4 border-green-500 bg-green-50 rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <h5 class="font-semibold text-lg text-gray-900">Family Function Leave</h5>
                                            <p class="text-sm text-gray-600">Applied: Jan 5, 2024 ‚Ä¢ Duration: Jan 10-12, 2024 (3 days)</p>
                                            <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm">‚úÖ Approved</span>
                                        </div>
                                    </div>
                                    <p class="text-sm text-gray-700 mb-2"><strong>Reason:</strong> Sister's wedding ceremony</p>
                                    <div class="text-xs text-green-600">
                                        Approved by: Dr. Smith ‚Ä¢ Approval Note: Approved. Please catch up on missed lectures.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUserType = null;

        // Show login modal
        function showLoginModal(userType) {
            currentUserType = userType;
            const modal = document.getElementById('loginModal');
            const title = document.getElementById('loginTitle');
            const idLabel = document.getElementById('loginIdLabel');
            
            if (userType === 'teacher') {
                title.textContent = 'Faculty Login';
                idLabel.textContent = 'Faculty ID';
            } else {
                title.textContent = 'Student Login';
                idLabel.textContent = 'Enrollment Number';
            }
            
            modal.classList.remove('hidden');
        }

        // Show registration form
        function showRegistration() {
            document.getElementById('registrationModal').classList.remove('hidden');
            document.getElementById('loginModal').classList.add('hidden');
        }

        // Show forgot password form
        function showForgotPassword() {
            document.getElementById('forgotPasswordModal').classList.remove('hidden');
            document.getElementById('loginModal').classList.add('hidden');
        }

        // Close registration modal
        function closeRegistrationModal() {
            document.getElementById('registrationModal').classList.add('hidden');
            document.getElementById('registrationForm').reset();
            // Hide conditional fields
            document.getElementById('studentFields').classList.add('hidden');
            document.getElementById('facultyFields').classList.add('hidden');
        }

        // Close forgot password modal
        function closeForgotPasswordModal() {
            document.getElementById('forgotPasswordModal').classList.add('hidden');
            document.getElementById('forgotPasswordForm').reset();
            // Reset to step 1
            document.getElementById('forgotPasswordStep1').classList.remove('hidden');
            document.getElementById('forgotPasswordStep2').classList.add('hidden');
        }

        // Toggle registration fields based on user type
        function toggleRegistrationFields() {
            const userType = document.getElementById('regType').value;
            const studentFields = document.getElementById('studentFields');
            const facultyFields = document.getElementById('facultyFields');
            
            if (userType === 'student') {
                studentFields.classList.remove('hidden');
                facultyFields.classList.add('hidden');
                // Make student fields required
                document.getElementById('regCourse').required = true;
                document.getElementById('regYear').required = true;
                // Remove faculty field requirements
                document.getElementById('regDepartment').required = false;
                document.getElementById('regDesignation').required = false;
            } else if (userType === 'faculty') {
                facultyFields.classList.remove('hidden');
                studentFields.classList.add('hidden');
                // Make faculty fields required
                document.getElementById('regDepartment').required = true;
                document.getElementById('regDesignation').required = true;
                // Remove student field requirements
                document.getElementById('regCourse').required = false;
                document.getElementById('regYear').required = false;
            } else {
                studentFields.classList.add('hidden');
                facultyFields.classList.add('hidden');
                // Remove all conditional requirements
                document.getElementById('regCourse').required = false;
                document.getElementById('regYear').required = false;
                document.getElementById('regDepartment').required = false;
                document.getElementById('regDesignation').required = false;
            }
        }

        // Handle registration form submission
        function handleRegistration(event) {
            event.preventDefault();
            
            const firstName = document.getElementById('regFirstName').value;
            const lastName = document.getElementById('regLastName').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const userType = document.getElementById('regType').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const termsAccepted = document.getElementById('regTerms').checked;
            
            // Validate passwords match
            if (password !== confirmPassword) {
                alert('‚ùå Password Mismatch!\n\nThe passwords you entered do not match. Please make sure both password fields contain the same password.');
                return;
            }
            
            // Validate password strength
            if (password.length < 8) {
                alert('‚ùå Weak Password!\n\nPassword must be at least 8 characters long.\n\nüí° Tips for a strong password:\n‚Ä¢ Use at least 8 characters\n‚Ä¢ Include uppercase and lowercase letters\n‚Ä¢ Add numbers and special characters\n‚Ä¢ Avoid common words or personal information');
                return;
            }
            
            // Validate terms acceptance
            if (!termsAccepted) {
                alert('‚ùå Terms and Conditions\n\nPlease read and accept the Terms and Conditions to proceed with registration.');
                return;
            }
            
            // Get additional fields based on user type
            let additionalInfo = '';
            if (userType === 'student') {
                const course = document.getElementById('regCourse').value;
                const year = document.getElementById('regYear').value;
                additionalInfo = `\nüìö Course: ${course}\nüìÖ Year: ${year}`;
            } else if (userType === 'faculty') {
                const department = document.getElementById('regDepartment').value;
                const designation = document.getElementById('regDesignation').value;
                additionalInfo = `\nüè¢ Department: ${department}\nüë®‚Äçüè´ Designation: ${designation}`;
            }
            
            // Show loading state
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = '‚è≥ Processing...';
            submitBtn.disabled = true;
            
            // Simulate processing time
            setTimeout(() => {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                // Show success message
                alert(`‚úÖ Registration Submitted Successfully!\n\nüë§ Name: ${firstName} ${lastName}\nüìß Email: ${email}\nüì± Phone: ${phone}\nüé≠ Type: ${userType.charAt(0).toUpperCase() + userType.slice(1)}${additionalInfo}\n\nüìã Next Steps:\n‚Ä¢ Your application will be reviewed within 24-48 hours\n‚Ä¢ You'll receive a confirmation email with further instructions\n‚Ä¢ Login credentials will be provided after approval\n‚Ä¢ Check your email regularly for updates\n\nüìû For urgent queries: +91-194-2424000`);
                
                closeRegistrationModal();
            }, 2000);
        }

        // Handle forgot password form submission
        function handleForgotPassword(event) {
            event.preventDefault();
            
            const userType = document.getElementById('forgotUserType').value;
            const identifier = document.getElementById('forgotId').value;
            
            // Show loading state
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = '‚è≥ Sending...';
            submitBtn.disabled = true;
            
            // Simulate processing time
            setTimeout(() => {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                // Show step 2 (success message)
                document.getElementById('forgotPasswordStep1').classList.add('hidden');
                document.getElementById('forgotPasswordStep2').classList.remove('hidden');
                
                // In a real application, this would send an actual email
                console.log(`Password reset requested for ${userType}: ${identifier}`);
            }, 2000);
        }

        // Close login modal
        function closeLoginModal() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('loginForm').reset();
        }

        // Handle login
        function handleLogin(event) {
            event.preventDefault();
            
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            
            // Simple validation for demo
            const validCredentials = {
                teacher: { id: 'T001', password: 'teacher123' },
                student: { id: 'ST001', password: 'student123' }
            };
            
            if (validCredentials[currentUserType] && 
                id === validCredentials[currentUserType].id && 
                password === validCredentials[currentUserType].password) {
                
                closeLoginModal();
                showDashboard(currentUserType);
            } else {
                alert('Invalid credentials! Please use the demo credentials provided.');
            }
        }

        // Show dashboard
        function showDashboard(userType) {
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('logoutBtn').classList.remove('hidden');
            
            if (userType === 'teacher') {
                document.getElementById('teacherSection').classList.remove('hidden');
                document.getElementById('studentSection').classList.add('hidden');
            } else {
                document.getElementById('studentSection').classList.remove('hidden');
                document.getElementById('teacherSection').classList.add('hidden');
            }
        }

        // Logout
        function logout() {
            document.getElementById('welcomeSection').classList.remove('hidden');
            document.getElementById('teacherSection').classList.add('hidden');
            document.getElementById('studentSection').classList.add('hidden');
            document.getElementById('logoutBtn').classList.add('hidden');
            currentUserType = null;
        }

        // Show teacher tabs
        function showTeacherTab(tabName) {
            // Hide all teacher content
            const teacherContents = document.querySelectorAll('.teacher-content');
            teacherContents.forEach(content => content.classList.add('hidden'));
            
            // Remove active class from all teacher tabs
            const teacherTabs = document.querySelectorAll('[id^="teacher"][id$="Tab"]');
            teacherTabs.forEach(tab => {
                tab.classList.remove('tab-active');
                tab.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            // Show selected content and activate tab
            document.getElementById('teacher' + tabName.charAt(0).toUpperCase() + tabName.slice(1)).classList.remove('hidden');
            const activeTab = document.getElementById('teacher' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Tab');
            activeTab.classList.add('tab-active');
            activeTab.classList.remove('bg-gray-200', 'text-gray-700');
        }

        // Show student tabs
        function showStudentTab(tabName) {
            // Hide all student content
            const studentContents = document.querySelectorAll('.student-content');
            studentContents.forEach(content => content.classList.add('hidden'));
            
            // Remove active class from all student tabs
            const studentTabs = document.querySelectorAll('[id^="student"][id$="Tab"]');
            studentTabs.forEach(tab => {
                tab.classList.remove('tab-active');
                tab.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            // Show selected content and activate tab
            document.getElementById('student' + tabName.charAt(0).toUpperCase() + tabName.slice(1)).classList.remove('hidden');
            const activeTab = document.getElementById('student' + tabName.charAt(0).toUpperCase() + tabName.slice(1) + 'Tab');
            activeTab.classList.add('tab-active');
            activeTab.classList.remove('bg-gray-200', 'text-gray-700');
        }

        // Teacher functions
        function createNotice(event) {
            event.preventDefault();
            const title = document.getElementById('noticeTitle').value;
            const content = document.getElementById('noticeContent').value;
            const priority = document.getElementById('noticePriority').value;
            
            alert(`Notice "${title}" created successfully!`);
            document.getElementById('noticeForm').reset();
        }

        function deleteNotice(id) {
            if (confirm('Are you sure you want to delete this notice?')) {
                alert('Notice deleted successfully!');
            }
        }

        function updateMarks(studentId) {
            alert(`Marks updated for student ${studentId}!`);
        }

        function updateAttendance(studentId) {
            alert(`Attendance updated for student ${studentId}!`);
        }

        // Teacher functions
        function createAssignment() {
            const title = document.getElementById('assignmentTitle').value;
            if (title) {
                alert(`Assignment "${title}" created successfully!`);
                document.getElementById('assignmentTitle').value = '';
                document.getElementById('assignmentDescription').value = '';
            }
        }

        function editAssignment(id) {
            alert(`Editing assignment ${id}`);
        }

        function deleteAssignment(id) {
            if (confirm('Are you sure you want to delete this assignment?')) {
                alert(`Assignment ${id} deleted successfully!`);
            }
        }

        function uploadResource(event) {
            event.preventDefault();
            const title = document.getElementById('resourceTitle').value;
            alert(`Resource "${title}" uploaded successfully!`);
            document.getElementById('resourceForm').reset();
        }

        function editResource(id) {
            alert(`Editing resource ${id}`);
        }

        function deleteResource(id) {
            if (confirm('Are you sure you want to delete this resource?')) {
                alert(`Resource ${id} deleted successfully!`);
            }
        }

        function approveLeave(id) {
            if (confirm('Are you sure you want to approve this leave application?')) {
                alert(`Leave application ${id} approved successfully!`);
            }
        }

        function rejectLeave(id) {
            if (confirm('Are you sure you want to reject this leave application?')) {
                alert(`Leave application ${id} rejected!`);
            }
        }

        // Student functions
        function searchBooks() {
            const searchTerm = document.getElementById('bookSearch').value;
            alert(`Searching for books: "${searchTerm}"`);
        }

        function requestBook(bookId) {
            alert(`Book request submitted for ${bookId}!`);
        }

        function renewBook(bookId) {
            alert(`Renewal request submitted for ${bookId}!`);
        }

        function returnBook(bookId) {
            if (confirm('Are you sure you want to return this book?')) {
                alert(`Book ${bookId} returned successfully!`);
            }
        }

        function filterResources(type) {
            alert(`Filtering resources by: ${type}`);
        }

        function submitAssignment(id) {
            alert(`Assignment ${id} submitted successfully!`);
        }

        function viewAssignment(id) {
            alert(`Viewing assignment details for ${id}`);
        }

        function submitLeaveApplication(event) {
            event.preventDefault();
            const leaveType = document.getElementById('leaveType').value;
            const fromDate = document.getElementById('leaveFromDate').value;
            const toDate = document.getElementById('leaveToDate').value;
            alert(`Leave application submitted: ${leaveType} from ${fromDate} to ${toDate}`);
            document.getElementById('leaveForm').reset();
        }

        // Show subject marks based on selection
        function showSubjectMarks() {
            const selectedSubject = document.getElementById('subjectSelect').value;
            
            // Hide all subject marks
            const allSubjectMarks = document.querySelectorAll('.subject-marks');
            allSubjectMarks.forEach(marks => marks.classList.add('hidden'));
            
            // Show selected subject marks
            if (selectedSubject === 'mathematics') {
                document.getElementById('mathematicsMarks').classList.remove('hidden');
            } else if (selectedSubject === 'physics') {
                document.getElementById('physicsMarks').classList.remove('hidden');
            } else {
                // For other subjects, show a placeholder
                alert(`Marks for ${selectedSubject} will be available soon!`);
                document.getElementById('mathematicsMarks').classList.remove('hidden');
            }
        }

        // Excel file handling functions
        function handleExcelUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            console.log('File selected:', file.name, 'Size:', file.size, 'Type:', file.type);

            // Validate file type
            const fileName = file.name.toLowerCase();
            const validExtensions = ['.xlsx', '.xls', '.csv'];
            const isValidFile = validExtensions.some(ext => fileName.endsWith(ext));
            
            if (!isValidFile) {
                alert('‚ùå Invalid file type!\n\nPlease upload a valid Excel file:\n‚Ä¢ .xlsx (Excel 2007+)\n‚Ä¢ .xls (Excel 97-2003)\n‚Ä¢ .csv (Comma Separated Values)');
                document.getElementById('excelFile').value = '';
                return;
            }

            // Validate file size (10MB limit)
            if (file.size > 10 * 1024 * 1024) {
                alert('‚ùå File too large!\n\nFile size should be less than 10MB.\nCurrent file size: ' + (file.size / (1024 * 1024)).toFixed(2) + 'MB');
                document.getElementById('excelFile').value = '';
                return;
            }

            // Check if we're on the correct tab
            const marksTab = document.getElementById('teacherMarks');
            if (marksTab && marksTab.classList.contains('hidden')) {
                alert('‚ö†Ô∏è Please go to the "Manage Marks" tab first before uploading files.');
                document.getElementById('excelFile').value = '';
                return;
            }

            // Show loading state
            const fileStatus = document.getElementById('fileStatus');
            const fileStatusText = document.getElementById('fileStatusText');
            
            if (fileStatus && fileStatusText) {
                fileStatusText.textContent = '‚è≥ Processing Excel file... Please wait.';
                fileStatus.classList.remove('hidden');
                
                // Reset to success styling
                const statusContainer = fileStatus.querySelector('div');
                if (statusContainer) {
                    statusContainer.className = 'bg-green-50 border border-green-200 rounded-lg p-4';
                }
                const statusIcon = fileStatus.querySelector('svg');
                if (statusIcon) {
                    statusIcon.className = 'h-5 w-5 text-green-400';
                }
                const statusTextElement = fileStatus.querySelector('p');
                if (statusTextElement) {
                    statusTextElement.className = 'text-sm font-medium text-green-800';
                }
            }

            // Read and process the file
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    console.log('File loaded, processing...');
                    let workbook;
                    
                    if (fileName.endsWith('.csv')) {
                        // Handle CSV files
                        const csvData = e.target.result;
                        console.log('Processing CSV data...');
                        workbook = XLSX.read(csvData, { type: 'string' });
                    } else {
                        // Handle Excel files
                        const data = new Uint8Array(e.target.result);
                        console.log('Processing Excel data...');
                        workbook = XLSX.read(data, { type: 'array' });
                    }
                    
                    console.log('Workbook created:', workbook);
                    
                    // Get the first worksheet
                    const firstSheetName = workbook.SheetNames[0];
                    const worksheet = workbook.Sheets[firstSheetName];
                    
                    console.log('Worksheet selected:', firstSheetName);
                    
                    // Convert to JSON
                    const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });
                    
                    console.log('JSON data:', jsonData);
                    
                    if (!jsonData || jsonData.length < 1) {
                        throw new Error('File appears to be empty or could not be read');
                    }
                    
                    if (jsonData.length < 2) {
                        throw new Error('File must contain at least a header row and one data row');
                    }
                    
                    // Process the data and update the table
                    processExcelData(jsonData, file.name);
                    
                } catch (error) {
                    console.error('Error processing file:', error);
                    
                    if (fileStatus && fileStatusText) {
                        fileStatusText.textContent = `‚ùå Error: ${error.message}`;
                        
                        // Change to error styling
                        const statusContainer = fileStatus.querySelector('div');
                        if (statusContainer) {
                            statusContainer.className = 'bg-red-50 border border-red-200 rounded-lg p-4';
                        }
                        const statusIcon = fileStatus.querySelector('svg');
                        if (statusIcon) {
                            statusIcon.className = 'h-5 w-5 text-red-400';
                        }
                        const statusTextElement = fileStatus.querySelector('p');
                        if (statusTextElement) {
                            statusTextElement.className = 'text-sm font-medium text-red-800';
                        }
                    }
                    
                    alert(`‚ùå Error processing file!\n\nError: ${error.message}\n\nüí° Tips:\n‚Ä¢ Make sure the file is not corrupted\n‚Ä¢ Check that it has proper headers\n‚Ä¢ Try downloading and using our template\n‚Ä¢ Ensure the file is not password protected`);
                    
                    // Reset file input
                    document.getElementById('excelFile').value = '';
                }
            };
            
            reader.onerror = function(error) {
                console.error('FileReader error:', error);
                alert('‚ùå Error reading file!\n\nPlease try again or use a different file.');
                document.getElementById('excelFile').value = '';
            };
            
            // Read the file
            if (fileName.endsWith('.csv')) {
                reader.readAsText(file);
            } else {
                reader.readAsArrayBuffer(file);
            }
        }

        function processExcelData(data, fileName) {
            const headers = data[0];
            const rows = data.slice(1);
            
            // Find column indices (flexible header matching)
            const findColumnIndex = (searchTerms) => {
                for (let i = 0; i < headers.length; i++) {
                    const header = (headers[i] || '').toString().toLowerCase().trim();
                    if (searchTerms.some(term => header.includes(term.toLowerCase()))) {
                        return i;
                    }
                }
                return -1;
            };
            
            const columnIndices = {
                enrollment: findColumnIndex(['enrollment', 'enroll', 'student id', 'id', 'roll', 'number']),
                name: findColumnIndex(['name', 'student name', 'student']),
                cia1: findColumnIndex(['cia 1', 'cia1', 'test 1', 'test1', 'exam 1']),
                cia2: findColumnIndex(['cia 2', 'cia2', 'test 2', 'test2', 'exam 2']),
                presentation: findColumnIndex(['presentation', 'present']),
                assignment: findColumnIndex(['assignment', 'assign']),
                attendance: findColumnIndex(['attendance', 'attend'])
            };
            
            console.log('Column indices found:', columnIndices);
            console.log('Headers:', headers);
            
            // Update the table
            const tableBody = document.getElementById('marksTableBody');
            if (!tableBody) {
                alert('Error: Could not find the marks table. Please make sure you are on the "Manage Marks" tab.');
                return;
            }
            
            tableBody.innerHTML = '';
            
            let validRows = 0;
            
            rows.forEach((row, index) => {
                if (!row || row.length === 0 || row.every(cell => !cell)) return;
                
                const enrollment = columnIndices.enrollment >= 0 ? 
                    (row[columnIndices.enrollment] || '').toString().trim() : 
                    `2324CUKmr${String(index + 1).padStart(2, '0')}`;
                    
                const name = columnIndices.name >= 0 ? 
                    (row[columnIndices.name] || '').toString().trim() : 
                    `Student ${index + 1}`;
                
                if (!enrollment && !name) return;
                
                const cia1 = columnIndices.cia1 >= 0 ? (row[columnIndices.cia1] || '') : '';
                const cia2 = columnIndices.cia2 >= 0 ? (row[columnIndices.cia2] || '') : '';
                const presentation = columnIndices.presentation >= 0 ? (row[columnIndices.presentation] || '') : '';
                const assignment = columnIndices.assignment >= 0 ? (row[columnIndices.assignment] || '') : '';
                const attendance = columnIndices.attendance >= 0 ? (row[columnIndices.attendance] || '') : '';
                
                const newRow = document.createElement('tr');
                newRow.className = 'border-b hover:bg-gray-50';
                newRow.innerHTML = `
                    <td class="px-4 py-3 text-gray-900 border-r font-medium">${enrollment}</td>
                    <td class="px-4 py-3 text-gray-900 border-r">${name}</td>
                    <td class="px-4 py-3 text-center border-r">
                        <input type="number" value="${cia1}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" step="0.5" onchange="calculateTotal(this)">
                    </td>
                    <td class="px-4 py-3 text-center border-r">
                        <input type="number" value="${cia2}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" step="0.5" onchange="calculateTotal(this)">
                    </td>
                    <td class="px-4 py-3 text-center border-r">
                        <input type="number" value="${presentation}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                    </td>
                    <td class="px-4 py-3 text-center border-r">
                        <input type="number" value="${assignment}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" step="0.5" onchange="calculateTotal(this)">
                    </td>
                    <td class="px-4 py-3 text-center border-r">
                        <input type="number" value="${attendance}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                    </td>
                    <td class="px-4 py-3 text-center border-r">
                        <span class="attendance-marks font-semibold text-gray-600">-</span>
                    </td>
                    <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                    <td class="px-4 py-3 text-center bg-gray-50">
                        <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                    </td>
                `;
                
                tableBody.appendChild(newRow);
                validRows++;
                
                // Calculate totals for this row if values are provided
                setTimeout(() => {
                    if (attendance) {
                        const attendanceInput = newRow.querySelector('input[onchange="calculateAttendanceMarks(this)"]');
                        calculateAttendanceMarks(attendanceInput);
                    }
                    
                    if (cia1 || cia2 || presentation || assignment) {
                        const firstInput = newRow.querySelector('input[onchange="calculateTotal(this)"]');
                        calculateTotal(firstInput);
                    }
                }, 100);
            });
            
            // Show success message
            const fileStatusText = document.getElementById('fileStatusText');
            fileStatusText.textContent = `Excel file "${fileName}" processed successfully! Loaded ${validRows} student records.`;
            
            // Reset file input
            document.getElementById('excelFile').value = '';
            
            alert(`‚úÖ File processed successfully!\n\nüìä File: ${fileName}\nüë• Students loaded: ${validRows}\n\nüí° Tips:\n‚Ä¢ All data has been loaded into the table\n‚Ä¢ Edit any marks directly in the table\n‚Ä¢ Attendance marks calculate automatically\n‚Ä¢ Use "Save All Changes" to save your data\n‚Ä¢ Use "Export to Excel" to download the updated data`);
        }

        function downloadTemplate() {
            try {
                // Create a more comprehensive template
                const templateData = [
                    ['Enrollment No.', 'Student Name', 'CIA 1 (Out of 10)', 'CIA 2 (Out of 10)', 'Presentation (Out of 10)', 'Assignment (Out of 5)', 'Attendance %'],
                    ['ST001', 'John Doe', '', '', '', '', ''],
                    ['ST002', 'Jane Smith', '', '', '', '', ''],
                    ['ST003', 'Mike Johnson', '', '', '', '', ''],
                    ['ST004', 'Sarah Wilson', '', '', '', '', ''],
                    ['ST005', 'David Brown', '', '', '', '', ''],
                    ['ST006', 'Emily Davis', '', '', '', '', ''],
                    ['ST007', 'Michael Wilson', '', '', '', '', ''],
                    ['ST008', 'Lisa Anderson', '', '', '', '', ''],
                    ['ST009', 'Robert Taylor', '', '', '', '', ''],
                    ['ST010', 'Jennifer Martinez', '', '', '', '', '']
                ];
                
                // Create workbook and worksheet
                const wb = XLSX.utils.book_new();
                const ws = XLSX.utils.aoa_to_sheet(templateData);
                
                // Set column widths
                ws['!cols'] = [
                    { width: 15 }, // Enrollment No.
                    { width: 20 }, // Student Name
                    { width: 18 }, // CIA 1
                    { width: 18 }, // CIA 2
                    { width: 20 }, // Presentation
                    { width: 18 }, // Assignment
                    { width: 15 }  // Attendance %
                ];
                
                // Add the worksheet to workbook
                XLSX.utils.book_append_sheet(wb, ws, 'Student Marks');
                
                // Generate and download the file
                const fileName = `Student_Marks_Template_${new Date().toISOString().split('T')[0]}.xlsx`;
                XLSX.writeFile(wb, fileName);
                
                alert('‚úÖ Template downloaded successfully!\n\nüìã Instructions:\n1. Fill in the student marks in the downloaded Excel file\n2. Keep the column headers exactly as they are\n3. Upload the completed file using the upload area above\n\nüí° Tip: You can add more students by copying the row format');
                
            } catch (error) {
                console.error('Error creating template:', error);
                
                // Fallback to CSV if Excel generation fails
                const csvContent = `Enrollment No.,Student Name,CIA 1 (Out of 10),CIA 2 (Out of 10),Presentation (Out of 10),Assignment (Out of 5),Attendance %
ST001,John Doe,,,,,
ST002,Jane Smith,,,,,
ST003,Mike Johnson,,,,,
ST004,Sarah Wilson,,,,,
ST005,David Brown,,,,,
ST006,Emily Davis,,,,,
ST007,Michael Wilson,,,,,
ST008,Lisa Anderson,,,,,
ST009,Robert Taylor,,,,,
ST010,Jennifer Martinez,,,,,`;

                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Student_Marks_Template_${new Date().toISOString().split('T')[0]}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                
                alert('‚úÖ CSV Template downloaded successfully!\n\nNote: Excel generation failed, so a CSV template was created instead.');
            }
        }

        function loadSubjectMarks() {
            const subject = document.getElementById('subjectSelectTeacher').value;
            const subjectName = document.getElementById('currentSubjectName');
            
            // Update subject name display
            const subjectNames = {
                'mathematics': 'Mathematics',
                'physics': 'Physics', 
                'chemistry': 'Chemistry',
                'computer-science': 'Computer Science'
            };
            
            subjectName.textContent = subjectNames[subject] || 'Mathematics';
            
            // In a real application, you would load different data for each subject
            alert(`Loading marks for ${subjectNames[subject]}...`);
        }

        function calculateAttendanceMarks(input) {
            const attendance = parseFloat(input.value) || 0;
            const row = input.closest('tr');
            const attendanceMarksSpan = row.querySelector('.attendance-marks');
            
            let marks = 0;
            let status = '';
            let colorClass = '';
            
            if (attendance >= 95) {
                marks = 5;
                status = '5';
                colorClass = 'text-green-600';
            } else if (attendance >= 90) {
                marks = 4;
                status = '4';
                colorClass = 'text-blue-600';
            } else if (attendance >= 85) {
                marks = 3;
                status = '3';
                colorClass = 'text-yellow-600';
            } else if (attendance >= 80) {
                marks = 2;
                status = '2';
                colorClass = 'text-orange-600';
            } else if (attendance >= 75) {
                marks = 1;
                status = '1';
                colorClass = 'text-purple-600';
            } else {
                marks = 0;
                status = '0 (Ineligible)';
                colorClass = 'text-red-600';
            }
            
            attendanceMarksSpan.textContent = status;
            attendanceMarksSpan.className = `attendance-marks font-semibold ${colorClass}`;
            
            // Recalculate total
            calculateTotal(input);
        }

        function calculateTotal(input) {
            const row = input.closest('tr');
            const inputs = row.querySelectorAll('input[type="number"]');
            
            // Get all marks (excluding attendance percentage)
            const test1 = parseFloat(inputs[0].value) || 0;
            const test2 = parseFloat(inputs[1].value) || 0;
            const presentation = parseFloat(inputs[2].value) || 0;
            const assignment = parseFloat(inputs[3].value) || 0;
            
            // Get attendance marks from the span
            const attendanceMarksText = row.querySelector('.attendance-marks').textContent;
            const attendanceMarks = attendanceMarksText.includes('Ineligible') ? 0 : parseFloat(attendanceMarksText) || 0;
            
            // Calculate total (out of 50)
            const total = test1 + test2 + presentation + assignment + attendanceMarks;
            
            // Update total display
            const totalCell = row.querySelector('.total-marks');
            totalCell.textContent = total.toFixed(1);
            
            // Calculate and update grade (based on 50 marks)
            const gradeSpan = row.querySelector('.grade-display');
            let grade = 'F';
            let gradeClass = 'grade-D';
            
            if (total >= 45) {
                grade = 'A+';
                gradeClass = 'grade-A';
            } else if (total >= 40) {
                grade = 'A';
                gradeClass = 'grade-A';
            } else if (total >= 35) {
                grade = 'B+';
                gradeClass = 'grade-B';
            } else if (total >= 30) {
                grade = 'B';
                gradeClass = 'grade-B';
            } else if (total >= 25) {
                grade = 'C';
                gradeClass = 'grade-C';
            } else {
                grade = 'F';
                gradeClass = 'grade-D';
            }
            
            gradeSpan.textContent = grade;
            gradeSpan.className = `px-2 py-1 rounded text-white ${gradeClass} grade-display`;
        }

        function exportMarks() {
            const subject = document.getElementById('subjectSelectTeacher').value;
            const subjectNames = {
                'mathematics': 'Mathematics',
                'physics': 'Physics', 
                'chemistry': 'Chemistry',
                'computer-science': 'Computer Science'
            };
            
            // Get table data
            const table = document.getElementById('marksTable');
            const rows = table.querySelectorAll('tbody tr');
            
            let csvContent = 'Enrollment No.,Student Name,CIA 1,CIA 2,Presentation,Assignment,Attendance %,Attendance Marks,Total,Grade\n';
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                const enrollmentNo = cells[0].textContent.trim();
                const studentName = cells[1].textContent.trim();
                const cia1 = cells[2].querySelector('input').value;
                const cia2 = cells[3].querySelector('input').value;
                const presentation = cells[4].querySelector('input').value;
                const assignment = cells[5].querySelector('input').value;
                const attendancePercent = cells[6].querySelector('input').value;
                const attendanceMarks = cells[7].textContent.trim();
                const total = cells[8].textContent.trim();
                const grade = cells[9].querySelector('span').textContent.trim();
                
                csvContent += `${enrollmentNo},${studentName},${cia1},${cia2},${presentation},${assignment},${attendancePercent},${attendanceMarks},${total},${grade}\n`;
            });
            
            // Create and download file
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${subjectNames[subject]}_Marks_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            alert(`Marks exported successfully for ${subjectNames[subject]}!`);
        }

        function saveAllMarks() {
            // In a real application, this would save to a database
            const subject = document.getElementById('subjectSelectTeacher').value;
            const subjectNames = {
                'mathematics': 'Mathematics',
                'physics': 'Physics', 
                'chemistry': 'Chemistry',
                'computer-science': 'Computer Science'
            };
            
            // Show loading state
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'üíæ Saving...';
            button.disabled = true;
            
            setTimeout(() => {
                button.textContent = originalText;
                button.disabled = false;
                alert(`All marks for ${subjectNames[subject]} have been saved successfully!`);
            }, 2000);
        }

        // Drag and drop functionality
        function setupDragAndDrop() {
            const dropZone = document.getElementById('dropZone');
            
            if (!dropZone) return;
            
            // Prevent default drag behaviors
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
                document.body.addEventListener(eventName, preventDefaults, false);
            });
            
            // Highlight drop zone when item is dragged over it
            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, unhighlight, false);
            });
            
            // Handle dropped files
            dropZone.addEventListener('drop', handleDrop, false);
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            function highlight(e) {
                dropZone.classList.add('border-blue-500', 'bg-blue-50');
            }
            
            function unhighlight(e) {
                dropZone.classList.remove('border-blue-500', 'bg-blue-50');
            }
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    const file = files[0];
                    // Create a fake event object to pass to handleExcelUpload
                    const fakeEvent = {
                        target: {
                            files: [file]
                        }
                    };
                    handleExcelUpload(fakeEvent);
                }
            }
        }
        
        // Load sample data function
        function loadSampleData() {
            if (confirm('üîÑ Load Sample Data?\n\nThis will replace any existing data in the table with sample marks for all students.\n\nContinue?')) {
                const tableBody = document.getElementById('marksTableBody');
                if (!tableBody) {
                    alert('‚ùå Error: Please make sure you are on the "Manage Marks" tab.');
                    return;
                }
                
                // Sample data for the first 10 students
                const sampleData = [
                    ['2324CUKmr01', 'ABDUL WARIS', '12', '13', '8.5', '4', '95'],
                    ['2324CUKmr02', 'ABRAAR SAJAD', '11', '14', '9', '5', '88'],
                    ['2324CUKmr03', 'ADNAAN ZARGAR', '13', '12', '7.5', '4', '92'],
                    ['2324CUKmr04', 'AFAAN HUSSAIN', '10', '11', '8', '3', '85'],
                    ['2324CUKmr05', 'AINAM MUSHTAQ', '14', '15', '9.5', '5', '98'],
                    ['2324CUKmr06', 'ALEEM KANYU', '9', '10', '7', '3', '78'],
                    ['2324CUKmr07', 'ARSALAN YOUSUF', '12', '13', '8.5', '4', '90'],
                    ['2324CUKmr08', 'ASEEF BANDEY', '11', '12', '8', '4', '87'],
                    ['2324CUKmr09', 'ATISHAM', '13', '14', '9', '5', '94'],
                    ['2324CUKmr10', 'BIAL AHMAD', '10', '9', '7.5', '3', '82']
                ];
                
                tableBody.innerHTML = '';
                
                sampleData.forEach((rowData, index) => {
                    const newRow = document.createElement('tr');
                    newRow.className = 'border-b hover:bg-gray-50';
                    newRow.innerHTML = `
                        <td class="px-4 py-3 text-gray-900 border-r font-medium">${rowData[0]}</td>
                        <td class="px-4 py-3 text-gray-900 border-r">${rowData[1]}</td>
                        <td class="px-4 py-3 text-center border-r">
                            <input type="number" value="${rowData[2]}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" step="0.5" onchange="calculateTotal(this)">
                        </td>
                        <td class="px-4 py-3 text-center border-r">
                            <input type="number" value="${rowData[3]}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="15" step="0.5" onchange="calculateTotal(this)">
                        </td>
                        <td class="px-4 py-3 text-center border-r">
                            <input type="number" value="${rowData[4]}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="10" step="0.5" onchange="calculateTotal(this)">
                        </td>
                        <td class="px-4 py-3 text-center border-r">
                            <input type="number" value="${rowData[5]}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="5" step="0.5" onchange="calculateTotal(this)">
                        </td>
                        <td class="px-4 py-3 text-center border-r">
                            <input type="number" value="${rowData[6]}" class="w-16 px-2 py-1 border rounded bg-white text-gray-900 text-center" min="0" max="100" onchange="calculateAttendanceMarks(this)">
                        </td>
                        <td class="px-4 py-3 text-center border-r">
                            <span class="attendance-marks font-semibold text-gray-600">-</span>
                        </td>
                        <td class="px-4 py-3 text-center bg-gray-50 font-semibold total-marks">-</td>
                        <td class="px-4 py-3 text-center bg-gray-50">
                            <span class="px-2 py-1 rounded text-white grade-D grade-display">-</span>
                        </td>
                    `;
                    
                    tableBody.appendChild(newRow);
                    
                    // Calculate totals for this row
                    setTimeout(() => {
                        const attendanceInput = newRow.querySelector('input[onchange="calculateAttendanceMarks(this)"]');
                        calculateAttendanceMarks(attendanceInput);
                        
                        const firstInput = newRow.querySelector('input[onchange="calculateTotal(this)"]');
                        calculateTotal(firstInput);
                    }, 50);
                });
                
                alert('‚úÖ Sample data loaded successfully!\n\nüìä Loaded 10 students with sample marks\nüí° You can now edit any marks directly in the table');
            }
        }
        
        // Clear all data function
        function clearAllData() {
            if (confirm('üóëÔ∏è Clear All Data?\n\n‚ö†Ô∏è This will remove all student data from the table.\n\nThis action cannot be undone. Continue?')) {
                const tableBody = document.getElementById('marksTableBody');
                if (tableBody) {
                    tableBody.innerHTML = `
                        <tr class="text-center">
                            <td colspan="10" class="px-4 py-8 text-gray-500">
                                <div class="text-4xl mb-2">üìä</div>
                                <div class="text-lg font-medium">No student data</div>
                                <div class="text-sm">Upload an Excel file or load sample data to get started</div>
                            </td>
                        </tr>
                    `;
                    
                    // Hide file status
                    const fileStatus = document.getElementById('fileStatus');
                    if (fileStatus) {
                        fileStatus.classList.add('hidden');
                    }
                    
                    alert('‚úÖ Table cleared successfully!\n\nüí° You can now:\n‚Ä¢ Upload a new Excel file\n‚Ä¢ Load sample data\n‚Ä¢ Add students manually');
                }
            }
        }

        // Initialize drag and drop when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setupDragAndDrop();
        });

        // Close modal when clicking outside
        document.getElementById('loginModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLoginModal();
            }
        });

        // Close registration modal when clicking outside
        document.getElementById('registrationModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeRegistrationModal();
            }
        });

        // Close forgot password modal when clicking outside
        document.getElementById('forgotPasswordModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeForgotPasswordModal();
            }
        });
    </script>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 text-white mt-20 border-t-4 border-blue-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <!-- University Info -->
                <div>
                    <div class="flex items-center mb-6">
                        <div class="w-16 h-16 university-primary rounded-2xl flex items-center justify-center premium-shadow">
                            <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
                            </svg>
                        </div>
                        <div class="ml-4">
                            <h3 class="text-xl font-bold text-white">Central University of Kashmir</h3>
                            <p class="text-slate-300 text-sm font-medium">Academic Excellence</p>
                            <div class="w-16 h-0.5 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full mt-1"></div>
                        </div>
                    </div>
                    <p class="text-slate-300 text-sm leading-relaxed">
                        Empowering students through quality education and innovative learning solutions. Building tomorrow's leaders through academic excellence and research innovation.
                    </p>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="text-xl font-bold text-white mb-6 flex items-center">
                        <span class="w-1 h-6 bg-blue-500 rounded-full mr-3"></span>
                        Quick Links
                    </h4>
                    <ul class="space-y-3 text-sm">
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-300 flex items-center group">
                            <span class="w-2 h-2 bg-blue-400 rounded-full mr-3 group-hover:bg-white transition-colors"></span>
                            Academic Calendar
                        </a></li>
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-300 flex items-center group">
                            <span class="w-2 h-2 bg-blue-400 rounded-full mr-3 group-hover:bg-white transition-colors"></span>
                            Student Handbook
                        </a></li>
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-300 flex items-center group">
                            <span class="w-2 h-2 bg-blue-400 rounded-full mr-3 group-hover:bg-white transition-colors"></span>
                            Faculty Directory
                        </a></li>
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-300 flex items-center group">
                            <span class="w-2 h-2 bg-blue-400 rounded-full mr-3 group-hover:bg-white transition-colors"></span>
                            Library Resources
                        </a></li>
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-300 flex items-center group">
                            <span class="w-2 h-2 bg-blue-400 rounded-full mr-3 group-hover:bg-white transition-colors"></span>
                            Support Center
                        </a></li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div>
                    <h4 class="text-xl font-bold text-white mb-6 flex items-center">
                        <span class="w-1 h-6 bg-blue-500 rounded-full mr-3"></span>
                        Contact Information
                    </h4>
                    <div class="space-y-4 text-sm text-slate-300">
                        <div class="flex items-start group">
                            <div class="w-8 h-8 bg-blue-900 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-700 transition-colors">
                                <svg class="w-4 h-4 text-blue-300" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <div>
                                <div class="font-medium text-white">Address</div>
                                <div>Ganderbal, Jammu & Kashmir, India</div>
                            </div>
                        </div>
                        <div class="flex items-start group">
                            <div class="w-8 h-8 bg-blue-900 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-700 transition-colors">
                                <svg class="w-4 h-4 text-blue-300" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                                </svg>
                            </div>
                            <div>
                                <div class="font-medium text-white">Phone</div>
                                <div>+91-194-2424000</div>
                            </div>
                        </div>
                        <div class="flex items-start group">
                            <div class="w-8 h-8 bg-blue-900 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-700 transition-colors">
                                <svg class="w-4 h-4 text-blue-300" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                                </svg>
                            </div>
                            <div>
                                <div class="font-medium text-white">Email</div>
                                <div>info@cukashmir.ac.in</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Copyright Section -->
            <div class="border-t border-slate-700 mt-12 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="text-sm text-slate-300 mb-4 md:mb-0 font-medium">
                        <span class="text-white font-bold">¬© 2025 Nimra Wani.</span> All Rights Reserved.
                    </div>
                    <div class="flex space-x-8 text-sm text-slate-300">
                        <a href="#" class="hover:text-white transition-colors duration-300 font-medium">Privacy Policy</a>
                        <a href="#" class="hover:text-white transition-colors duration-300 font-medium">Terms of Service</a>
                        <a href="#" class="hover:text-white transition-colors duration-300 font-medium">Accessibility</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97234a982107c87a',t:'MTc1NTcwNzU5NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
